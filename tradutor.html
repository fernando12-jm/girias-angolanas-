<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Tradutor de G√≠rias Angolanas</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<div class="container">
  <h2>Bem-vindo ao Tradutor</h2>

  <!-- Campo de pesquisa -->
  <div style="position:relative;">
    <input type="text" id="giriaInput" placeholder="Digite uma g√≠ria..." oninput="mostrarSugestoes()" />
    <div id="sugestoesBox" class="suggestions" style="display:none;"></div>
  </div>

  <button onclick="traduzirGiria()">üîé Pesquisar</button>
  <button onclick="criarFraseAleatoria()">üí¨ Criar Frase</button>
  <button onclick="window.location.href='cadastrar-giria.html'">‚ûï Cadastrar Nova G√≠ria</button>

  <p id="resultado"></p>
</div>

<script>
  const usuarioLogado = localStorage.getItem("usuarioLogado");
  if (!usuarioLogado) window.location.href = "index.html";

  // Dicion√°rio padr√£o com mais de 50 g√≠rias angolanas
  const dicionarioPadrao = {
    "baba": "comida",
    "caba√ßa": "cabe√ßa",
    "chato": "dinheiro",
    "chela": "cerveja",
    "crian√ßa": "amigo ou parceiro",
    "dengo": "doen√ßa ou problema",
    "engui√ßa": "problema ou complica√ß√£o",
    "ful√¥": "mentira ou conversa fiada",
    "ganda": "grande",
    "ganguela": "boca",
    "kota": "comida",
    "lamba": "pegar ou roubar",
    "mata": "mat√©ria escolar ou assunto",
    "mina": "mo√ßa ou namorada",
    "minga": "nada",
    "mona": "mulher bonita",
    "muleka": "menina ou garota",
    "nega": "mulher ou amiga",
    "pau": "problema ou dificuldade",
    "pipa": "bebida alco√≥lica em geral",
    "pinto": "rapaz ou jovem",
    "prego": "dinheiro",
    "quenga": "mulher prom√≠scua",
    "safra": "sorte ou sorteio",
    "tromba": "nariz ou bico",
    "vint√©m": "quantia pequena de dinheiro",
    "xulipa": "pancadaria ou briga",
    "xale": "cal√ßa jeans",
    "xiba": "p√©ssimo ou ruim",
    "xinga": "insulto ou ofensa",
    "xu√°": "confus√£o ou bagun√ßa",
    "zanga": "briga ou discuss√£o",
    "zinga": "veloz ou r√°pido",
    "brazza": "camisa",
    "cacunda": "costas",
    "cambada": "grupo de amigos ou turma",
    "canha": "carteira de motorista",
    "capanga": "seguran√ßa ou bra√ßo direito",
    "carrega": "namorado(a)",
    "chave": "solu√ß√£o ou resposta",
    "chibi": "urinar",
    "chicote": "corpo ou f√≠sico",
    "chouri√ßa": "p√£o comprido ou sandu√≠che",
    "coco": "cabe√ßa",
    "cueca": "roupa √≠ntima",
    "curi": "interessado ou curioso",
    "curuja": "pessoa fofoqueira",
    "danado": "azarado ou azarento",
    "disse": "excesso ou fartura",
    "dumba": "pol√≠cia",
    "engoma": "ferro de passar roupa",
    "fati": "faca ou instrumento cortante",
    "fuba": "farinha de milho",
    "ganguelo": "boc√≥ ou bobo",
    "jubileu": "confus√£o ou festa grande",
    "kipapu": "telefone celular",
    "kitango": "parte de tr√°s",
    "kuduro": "estilo musical dan√ßante",
    "kuma": "comer",
    "lamba": "pegar ou tomar",
    "lingala": "idioma ou l√≠ngua",
    "lobo": "homem solteiro ou sedutor",
    "macua": "pessoa origin√°ria do norte de Angola",
    "malandro": "esperto ou safado",
    "maneta": "m√£e ou m√£e adotiva",
    "massango": "descanso ou pausa",
    "mbaga": "perna",
    "meco": "namorado(a) ou relacionamento",
    "mikolo": "√°rvore ou lugar sombreado",
    "mutola": "saia ou vestido",
    "ndombe": "negro ou pessoa de pele escura",
    "ngola": "rei ou l√≠der",
    "nzambi": "Deus"
  };

  function getGiriasUsuario() {
    const usuarios = JSON.parse(localStorage.getItem("usuarios"));
    return usuarios[usuarioLogado]?.girias || {};
  }

  function traduzirGiria() {
    const giria = document.getElementById("giriaInput").value.trim().toLowerCase();
    const resultado = document.getElementById("resultado");

    const todasGirias = { ...dicionarioPadrao, ...getGiriasUsuario() };

    if (todasGirias[giria]) {
      resultado.innerHTML = `<strong>${giria}</strong>: ${todasGirias[giria]}`;
    } else {
      resultado.innerHTML = `A g√≠ria "<strong>${giria}</strong>" n√£o foi encontrada.`;
    }
  }

  function criarFraseAleatoria() {
    const todasGirias = { ...dicionarioPadrao, ...getGiriasUsuario() };
    const chaves = Object.keys(todasGirias);

    if (chaves.length === 0) {
      document.getElementById("resultado").innerHTML = "Cadastre algumas g√≠rias primeiro!";
      return;
    }

    const tiposSignificado = {
      comida: ["Hoje lambi um pouco de {{giria}}, mas tava xiba!", "A {{giria}} aqui √© top!"],
      bebida: ["Tomei muito {{giria}} ontem...", "Vamos beber uma {{giria}}?"],
      pessoa: ["Essa {{giria}} √© muito legal.", "Aquela {{giria}} t√° mona!"],
      dinheiro: ["Preciso de um prego pra pagar essa {{giria}}.", "N√£o tem chato pra comprar {{giria}}."],
      emo√ß√£o: ["Estou cheio de zanga depois disso.", "Ele ficou dengo com a situa√ß√£o..."],
      problema: ["Entrei em engui√ßa com essa {{giria}}.", "Isso virou uma xu√° total!"],
      corpo: ["Minha cacunda t√° doendo...", "Esse tromba dele √© grand√£o!"],
      outro: ["Essa {{giria}} √© muito √∫til.", "J√° usaram a {{giria}} hoje?"]
    };

    function classificar(significado) {
      if (significado.includes("comida") || significado.includes("comer")) return "comida";
      if (significado.includes("bebida") || significado.includes("cerveja")) return "bebida";
      if (significado.includes("amigo") || significado.includes("mulher") || significado.includes("homem")) return "pessoa";
      if (significado.includes("dinheiro") || significado.includes("valor")) return "dinheiro";
      if (significado.includes("doen√ßa") || significado.includes("problema")) return "problema";
      if (significado.includes("cabe√ßa") || significado.includes("nariz")) return "corpo";
      if (significado.includes("emo√ß√£o") || significado.includes("sentimento")) return "emo√ß√£o";
      return "outro";
    }

    const giriaAleatoria = chaves[Math.floor(Math.random() * chaves.length)];
    const significado = todasGirias[giriaAleatoria];
    const categoria = classificar(significado);
    const fraseAleatoria = tiposSignificado[categoria][Math.floor(Math.random() * tiposSignificado[categoria].length)];

    document.getElementById("resultado").innerHTML = `<em>üìå Frase criada:</em><br><strong>${fraseAleatoria.replace("{{giria}}", giriaAleatoria)}</strong>`;
  }

  function mostrarSugestoes() {
    const input = document.getElementById("giriaInput").value.toLowerCase();
    const sugestoesBox = document.getElementById("sugestoesBox");
    sugestoesBox.innerHTML = "";
    sugestoesBox.style.display = "none";

    if (input.length < 1) return;

    const todasGirias = Object.keys({ ...dicionarioPadrao, ...getGiriasUsuario() });
    const sugestoes = todasGirias.filter(g => g.includes(input));

    if (sugestoes.length > 0) {
      sugestoes.forEach(giria => {
        const div = document.createElement("div");
        div.className = "suggestion-item";
        div.textContent = giria;
        div.onclick = () => {
          document.getElementById("giriaInput").value = giria;
          traduzirGiria();
          sugestoesBox.style.display = "none";
        };
        sugestoesBox.appendChild(div);
      });
      sugestoesBox.style.display = "block";
    }
  }

  document.addEventListener("click", function(e) {
    const container = document.querySelector(".container");
    const sugestoesBox = document.getElementById("sugestoesBox");
    if (!container.contains(e.target)) {
      sugestoesBox.style.display = "none";
    }
  });
</script>

</body>
</html>