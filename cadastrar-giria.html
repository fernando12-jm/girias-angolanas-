<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Cadastrar G√≠ria</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <h2>üìù Cadastrar Nova G√≠ria</h2>
      <input type="text" id="novaGiria" placeholder="Nome da g√≠ria" />
      <input
        type="text"
        id="traducaoGiria"
        placeholder="Tradu√ß√£o ou significado"
      />
      <button onclick="cadastrarGiria()">‚ûï Cadastrar</button>
      <button onclick="window.location.href='tradutor.html'">‚Ü©Ô∏è Voltar</button>
      <p id="resultado"></p>
    </div>

    <script>
      const usuarioLogado = localStorage.getItem("usuarioLogado");
      if (!usuarioLogado) window.location.href = "index.html";

      function cadastrarGiria() {
        const giria = document
          .getElementById("novaGiria")
          .value.trim()
          .toLowerCase();
        const traducao = document.getElementById("traducaoGiria").value.trim();
        const resultado = document.getElementById("resultado");

        if (!giria || !traducao) {
          resultado.innerHTML =
            "<span style='color:red;'>Preencha todos os campos.</span>";
          return;
        }

        const usuarios = JSON.parse(localStorage.getItem("usuarios"));
        const todasGirias = {
          ...{
            baba: "comida",
            caba√ßa: "cabe√ßa",
            chato: "dinheiro",
            chela: "cerveja",
            crian√ßa: "amigo ou parceiro",
          },
          ...usuarios[usuarioLogado].girias,
        };

        if (todasGirias[giria]) {
          resultado.innerHTML = `<span style='color:orange;'>A g√≠ria "${giria}" j√° existe!</span>`;
          return;
        }

        usuarios[usuarioLogado].girias[giria] = traducao;
        localStorage.setItem("usuarios", JSON.stringify(usuarios));
        resultado.innerHTML = `<span style='color:#00ffaa;'>‚úÖ G√≠ria "${giria}" cadastrada com sucesso!</span>`;
        document.getElementById("novaGiria").value = "";
        document.getElementById("traducaoGiria").value = "";
      }
    </script>
  </body>
</html>
